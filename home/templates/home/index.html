{% extends "base.html" %}
{% load static %}

{% block extra_title %}
Home
{% endblock %}

{% block content %}

<div class="full-screen-image"
    style="background-image: url('https://an-interesting-website.s3.amazonaws.com/media/clothes.jpg');">
    <div class="inner">
        <h4 class="container">
            <div class="row">
                <div class="col">

                    <h4 class="mx-auto black-outline display-1 inner-header">Check out the new <a class="black-outline"
                            href="">deals</a></h4>

                    <a href="{% url 'products' %}" class="mt-4 btn btn-primary products-button btn-xl">View products</a>

                </div>
            </div>
        </h4>
    </div>
</div>

<div class="second">
    <div class="container">
        <div class="row">
            <div class="col">
                <h2>Top Products</h2>
            </div>
        </div>
        <div class="row">
            <div class="col h-70">
                <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                      {% for x in topProducts %}
                        <div class="carousel-item {% if forloop.counter == 1 %}active{% endif %}"
                            data-bs-interval="10000">
                            <div class="card">
                                <a href="{% url 'productdetails' product_id=x.pk %}">
                                    <img class="product-image" src="{{ x.image }}" alt="Product Image">
                                </a>
                                <div class="card-body">
                                    <p>{{ x.title }}</p>
                                    <p></p>
                                </div>
                            </div>
                        </div>
                      {% endfor %}
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                      <span class="">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
                      <span class="carousel-control-next-icon" aria-hidden="true"></span>
                      <span class="">Next</span>
                    </button>
                  </div>
            </div>

        </div>
    </div>
    <div class="container">
        <div class="row">
            {% for category in categories %}
            <div class="col-lg-4 col-md-6 col-sm-12">
                <div class="card">
                    <div class="card-header">
                        <form class="category-form" method="GET" action="{% url 'products' %}">
                            <span class="category-button">{{ category.friendly_name|title }}</span>
                            <input type="hidden" name="category" value="{{ category.name }}">
                        </form>
                    </div>
                    <div class="card-body">

                        <div class="category-image">
                            <img style="width: 100%; height: 200px;"
                                src="https://an-interesting-website.s3.amazonaws.com/media/{{ category.name }}.jpg"
                                alt="Category Image">
                        </div>

                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- Image by <a
        href="https://pixabay.com/users/stocksnap-894430/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=2618897">StockSnap</a>
    from <a
        href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=2618897">Pixabay</a>
    -->


{% block postloadjs %}
<script type="text/javascript">
    $('.category-button').each(function () {
        $(this).click(function () {
            let form = $(this).parent();
            form.submit();
        })
    })
</script>
{% endblock %}

{% endblock %}